
<div class="mix-edit form-outline text-center">

  <%if @mix.errors%>
    <%@mix.errors.full_messages.each do |message|%>
        <h4><%=message%></h4>
    <%end%>
  <%end%>

  <%=form_for [current_user, @mix] do |f|%>
    <%=f.text_field :title, placeholder: "Title", class: "form-control-lg", style: "width: 100%"%>
    <br><br>
    <%=f.label :description%>
    <%=f.rich_text_area :description%>
    <br>
    <%@mix.contents.each do |c|%>
      <div class="card-container">
        <div class="card">
          <%=render_piece(c)%>
        </div>
      </div>
          <%=link_to "Remove from mix", content_path(c, mix_id: @mix.id), method: :delete%>
          <%=f.fields_for :notes, c.specific_notes(@mix) do |note_fields|%>
            <%=note_fields.label "Edit note:"%>
            <%=note_fields.rich_text_area :text%>
            <%=note_fields.hidden_field :content_id, value: c.id%>
            <%=link_to "Delete note", note_path(note_fields.object.id, mix_id: @mix.id), method: :delete%>
          <%end%>
        <div class="note">
          <%=f.fields_for :notes, @mix.notes.build do |note_fields|%>
            <%=note_fields.label "New note:"%>
            <%=note_fields.rich_text_area :text%>
            <%=note_fields.hidden_field :content_id, value: c.id%>
          <%end%>
        </div>
   
    <%end%>
    <%=f.submit%>
  <%end%>
</div>

